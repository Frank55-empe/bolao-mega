<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bolão da Mega Sena</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    .hidden { display: none; }
    .dezena-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; margin: 20px 0; }
    .dezena { padding: 10px; text-align: center; background-color: #eee; border-radius: 5px; cursor: pointer; }
    .dezena.selected { background-color: #4caf50; color: white; }
    button { margin: 10px 0; padding: 10px 20px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Cadastro no Bolão da Mega Sena</h1>

  <!-- Etapa 1: Cadastro Inicial -->
  <div id="etapa1">
    <label>Nome completo: <input type="text" id="nomeCompleto"></label><br>
    <label>Nome para o jogo: <input type="text" id="nomeJogo"></label><br>
    <label>WhatsApp: <input type="text" id="whatsapp"></label><br>
    <label>Cidade: <input type="text" id="cidade"></label><br>
    <button onclick="verificarCadastro()">Próximo</button>
  </div>

  <!-- Etapa 2: Opção de manter jogo -->
  <div id="etapa2" class="hidden">
    <p>Você já participou antes. Deseja manter seu jogo anterior?</p>
    <button onclick="manterJogo()">Manter meu jogo</button>
    <button onclick="novoJogo()">Novo jogo</button>
  </div>

  <!-- Etapa 3: Seleção de Dezenas -->
  <div id="etapa3" class="hidden">
    <p>Selecione 10 dezenas:</p>
    <div class="dezena-grid" id="gradeDezenas"></div>
    <p>Dezenas selecionadas: <span id="contador">0</span>/10</p>
    <button id="btnConfirmarJogo" onclick="mostrarConfirmacao()" disabled>Confirmar Jogo</button>
  </div>

  <!-- Etapa 4: Confirmação -->
  <div id="etapa4" class="hidden">
    <h3>Confirme seus dados:</h3>
    <div id="resumo"></div>
    <button onclick="corrigirDados()">Corrigir</button>
    <button onclick="enviarDados()">Confirmar e Enviar</button>
  </div>

  <!-- Etapa 5: Agradecimento -->
  <div id="etapa5" class="hidden">
    <h2>Obrigado por participar!</h2>
    <p>Faça o pagamento via Pix usando os dados abaixo:</p>
    <p><strong>Chave Pix:</strong> 00000000000</p>
    <p><strong>Nome:</strong> Organizador do Bolão</p>
  </div>

  <script>
    const participantes = [];
    let dezenasSelecionadas = [];

    function verificarCadastro() {
      const nome = document.getElementById('nomeCompleto').value.trim();
      if (participantes.includes(nome)) {
        document.getElementById('etapa1').classList.add('hidden');
        document.getElementById('etapa2').classList.remove('hidden');
      } else {
        participantes.push(nome);
        novoJogo();
      }
    }

    function manterJogo() {
      dezenasSelecionadas = ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10"];
      mostrarConfirmacao();
    }

    function novoJogo() {
      document.getElementById('etapa1').classList.add('hidden');
      document.getElementById('etapa2').classList.add('hidden');
      document.getElementById('etapa3').classList.remove('hidden');
      gerarGrade();
    }

    function gerarGrade() {
      const grade = document.getElementById('gradeDezenas');
      grade.innerHTML = '';
      for (let i = 1; i <= 60; i++) {
        const dezena = String(i).padStart(2, '0');
        const div = document.createElement('div');
        div.textContent = dezena;
        div.className = 'dezena';
        div.onclick = () => selecionarDezena(div, dezena);
        grade.appendChild(div);
      }
    }

    function selecionarDezena(div, dezena) {
      if (div.classList.contains('selected')) {
        div.classList.remove('selected');
        dezenasSelecionadas = dezenasSelecionadas.filter(d => d !== dezena);
      } else {
        if (dezenasSelecionadas.length < 10) {
          div.classList.add('selected');
          dezenasSelecionadas.push(dezena);
        }
      }
      document.getElementById('contador').textContent = dezenasSelecionadas.length;
      document.getElementById('btnConfirmarJogo').disabled = dezenasSelecionadas.length !== 10;
    }

    function mostrarConfirmacao() {
      document.getElementById('etapa3').classList.add('hidden');
      document.getElementById('etapa4').classList.remove('hidden');

      const resumo = document.getElementById('resumo');
      const nome = document.getElementById('nomeCompleto').value;
      const nomeJogo = document.getElementById('nomeJogo').value;
      const whatsapp = document.getElementById('whatsapp').value;
      const cidade = document.getElementById('cidade').value;

      resumo.innerHTML = `
        <p><strong>Nome completo:</strong> ${nome}</p>
        <p><strong>Nome para o jogo:</strong> ${nomeJogo}</p>
        <p><strong>WhatsApp:</strong> ${whatsapp}</p>
        <p><strong>Cidade:</strong> ${cidade}</p>
        <p><strong>Dezenas:</strong> ${dezenasSelecionadas.join(', ')}</p>
      `;
    }

    function corrigirDados() {
      document.getElementById('etapa4').classList.add('hidden');
      document.getElementById('etapa3').classList.remove('hidden');
    }

    function enviarDados() {
      const dados = {
        nome: document.getElementById('nomeCompleto').value,
        nomeJogo: document.getElementById('nomeJogo').value,
        whatsapp: document.getElementById('whatsapp').value,
        cidade: document.getElementById('cidade').value,
        dezenas: dezenasSelecionadas.join(', ')
      };

      // Envio simulado
      fetch('https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec', {
        method: 'POST',
        body: JSON.stringify(dados),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.json())
      .then(() => {
        document.getElementById('etapa4').classList.add('hidden');
        document.getElementById('etapa5').classList.remove('hidden');
        // Resetar formulário
        dezenasSelecionadas = [];
        document.getElementById('nomeCompleto').value = '';
        document.getElementById('nomeJogo').value = '';
        document.getElementById('whatsapp').value = '';
        document.getElementById('cidade').value = '';
      });
    }
  </script>
</body>
</html>

