<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bolão da Mega Positivo</title>
  </head>
  <body style="font-family: Arial, sans-serif; background: linear-gradient(135deg, #25d366, #128C7E); color: #fff; padding: 20px; margin: 0;">
    <h1 style="text-align: center; color: #ffd700;">Bolão da Mega Positivo<br>(Bar do Enoquis)</h1>

    <form id="formulario" style="background-color: rgba(0, 0, 0, 0.2); padding: 20px; border-radius: 15px; max-width: 400px; margin: 0 auto;">
      <label for="nome" style="display: block; margin: 10px 0 5px;">Nome completo:</label>
      <input type="text" id="nome" required style="width: 100%; padding: 8px; margin-bottom: 15px; border: none; border-radius: 8px;" />

      <label for="nomeparajogo" style="display: block; margin: 10px 0 5px;">Nome para Jogo:</label>
      <input type="text" id="nomeparajogo" required style="width: 100%; padding: 8px; margin-bottom: 15px; border: none; border-radius: 8px;" />

      <label for="whatsapp" style="display: block; margin: 10px 0 5px;">WhatsApp:</label>
      <input type="text" id="whatsapp" required style="width: 100%; padding: 8px; margin-bottom: 15px; border: none; border-radius: 8px;" />

      <label for="cidade" style="display: block; margin: 10px 0 5px;">Cidade:</label>
      <input type="text" id="cidade" required style="width: 100%; padding: 8px; margin-bottom: 15px; border: none; border-radius: 8px;" />

      <label style="display: block; margin: 10px 0 5px;">Escolha 10 dezenas:</label>
      <div id="dezenas" style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 5px; margin-top: 10px;"></div>
      <div id="contador" style="text-align: center; font-size: 18px; margin-top: 10px; color: #ffd700;">Dezenas escolhidas: 0/10</div>

      <button type="submit" style="width: 100%; padding: 8px; margin-top: 15px; border: none; border-radius: 8px;">Confirmar Cadastro</button>
      <div id="loading" style="display: none; text-align: center; margin-top: 10px;">
        <img src="https://i.gifer.com/ZZ5H.gif" alt="Carregando..." style="width: 30px;" />
      </div>
    </form>

    <div id="confirmacao" style="display: none; text-align: center; background: #000000aa; padding: 20px; border-radius: 15px; margin: 20px auto; max-width: 400px;">
      <h2>Confira seus dados:</h2>
      <p><strong>Nome completo:</strong> <span id="confnome"></span></p>
      <p><strong>Nome para Jogo:</strong> <span id="confnomeparajogo"></span></p>
      <p><strong>WhatsApp:</strong> <span id="confWhatsapp"></span></p>
      <p><strong>Cidade:</strong> <span id="confcidade"></span></p>
      <p><strong>Dezenas:</strong> <span id="confdezenas"></span></p>
      <button id="btn-voltar" style="background-color: #fff; color: #128C7E; font-weight: bold; border-radius: 8px; padding: 8px; margin-top: 15px; cursor: pointer;">Confirmar Envio</button>
    </div>

    <script>
      const dezenasDiv = document.getElementById("dezenas");
      const contador = document.getElementById("contador");
      const form = document.getElementById("formulario");
      const loading = document.getElementById("loading");
      const confirmacao = document.getElementById("confirmacao");
      const btnVoltar = document.getElementById("btn-voltar");

      let dezenasSelecionadas = [];

      for (let i = 1; i <= 60; i++) {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.textContent = i.toString().padStart(2, "0");
        btn.style.cssText = "background-color: #fff; color: #000; font-weight: bold; border-radius: 8px; cursor: pointer; padding: 8px;";
        btn.addEventListener("click", () => selecionarDezena(i, btn));
        dezenasDiv.appendChild(btn);
      }

      function selecionarDezena(numero, btn) {
        if (dezenasSelecionadas.includes(numero)) {
          dezenasSelecionadas = dezenasSelecionadas.filter(d => d !== numero);
          btn.style.backgroundColor = "#fff";
        } else {
          if (dezenasSelecionadas.length >= 10) return;
          dezenasSelecionadas.push(numero);
          btn.style.backgroundColor = "#ffd700";
        }
        contador.textContent = `Dezenas escolhidas: ${dezenasSelecionadas.length}/10`;
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        if (dezenasSelecionadas.length !== 10) {
          alert("Você precisa escolher exatamente 10 dezenas.");
          return;
        }

        document.getElementById("confnome").textContent = document.getElementById("nome").value;
        document.getElementById("confnomeparajogo").textContent = document.getElementById("nomeparajogo").value;
        document.getElementById("confWhatsapp").textContent = document.getElementById("whatsapp").value;
        document.getElementById("confcidade").textContent = document.getElementById("cidade").value;
        document.getElementById("confdezenas").textContent = dezenasSelecionadas.map(d => d.toString().padStart(2, "0")).join(", ");

        form.style.display = "none";
        confirmacao.style.display = "block";
      });

      btnVoltar.addEventListener("click", async () => {
        const dados = {
          Nomecompleto: document.getElementById("confnome").textContent,
          Nomeparajogo: document.getElementById("confnomeparajogo").textContent,
          Whatsapp: document.getElementById("confWhatsapp").textContent,
          Cidade: document.getElementById("confcidade").textContent,
          Dezenas: document.getElementById("confdezenas").textContent
        };

        loading.style.display = "block";
        try {
          const response = await fetch("https://script.google.com/macros/s/AKfycbz2F4Oob36bg1dE-3TPA0AV0LIpjveh2ygOvjZ5uyEyUHVFBRNdmISLkJY0WvNaVhX5/exec", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(dados)
          });
          const result = await response.text();
          alert("Cadastro enviado com sucesso!");
          location.reload();
        } catch (error) {
          alert("Erro ao enviar os dados. Tente novamente.");
        } finally {
          loading.style.display = "none";
        }
      });
    </script>
  </body>
</html>
