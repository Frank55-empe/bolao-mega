<!-- MANTÉM TUDO IGUAL ATÉ A PARTE DO SCRIPT -->

<script>
  const dezenasContainer = document.getElementById("dezenasContainer");
  const msg = document.getElementById("msg");
  const sucesso = document.getElementById("sucesso");

  for (let i = 1; i <= 60; i++) {
    const btn = document.createElement("button");
    btn.textContent = i.toString().padStart(2, "0");
    btn.className = "bg-gray-200 hover:bg-blue-200 p-2 rounded";
    btn.addEventListener("click", (e) => {
      e.preventDefault();
      btn.classList.toggle("bg-blue-500");
      btn.classList.toggle("text-white");

      const selecionados = document.querySelectorAll("#dezenasContainer .bg-blue-500");
      if (selecionados.length > 10) {
        btn.classList.remove("bg-blue-500", "text-white");
        btn.classList.add("bg-gray-200");
      }

      msg.classList.toggle("hidden", selecionados.length === 10);
    });
    dezenasContainer.appendChild(btn);
  }

  document.getElementById("megaForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const selecionados = Array.from(document.querySelectorAll("#dezenasContainer .bg-blue-500"))
      .map(btn => btn.textContent);

    if (selecionados.length !== 10) {
      msg.classList.remove("hidden");
      return;
    }

    const form = e.target;
    const dados = {
      nomeCompleto: form.nome.value,
      nomeParaJogo: form.planilha_nome.value,
      whatsapp: form.whatsapp.value,
      cidade: form.cidade.value,
      dezenas: selecionados
    };

    try {
      const res = await fetch("https://script.google.com/macros/s/AKfycbwUXTAnJvNX1FATNnf-c-WrjJnnvx2I1O_MSY0ID7zYAoPWiGTl1w62lYJXhLvpoXyV/exec", {
        method: "POST",
        body: JSON.stringify(dados),
        headers: {
          "Content-Type": "application/json"
        }
      });

      if (res.ok) {
        sucesso.classList.remove("hidden");
        form.reset();
        document.querySelectorAll("#dezenasContainer .bg-blue-500").forEach(btn => {
          btn.classList.remove("bg-blue-500", "text-white");
          btn.classList.add("bg-gray-200");
        });
      } else {
        alert("Erro ao enviar. Tente novamente.");
      }
    } catch (err) {
      alert("Erro ao enviar. Tente novamente.");
      console.error(err);
    }
  });
</script>

